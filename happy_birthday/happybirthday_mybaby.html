<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ğŸ’– LoveOS Terminal â€” Birthday Edition</title>

<style>
*{box-sizing:border-box;font-family:'Consolas','Courier New',monospace}
body{
  margin:0;min-height:100vh;
  background:
    radial-gradient(900px 500px at 10% 10%, rgba(255,94,168,.18), transparent 60%),
    radial-gradient(800px 600px at 90% 20%, rgba(61,255,155,.14), transparent 55%),
    radial-gradient(circle at top,#1b1f3b,#05050a 70%);
  display:flex;justify-content:center;align-items:center;color:#eaeaf0;
}

/* ================= ä¸»ç•«é¢ ================= */
.wrap{
  width:95%;max-width:1100px;
  background:rgba(20,20,40,.55);
  backdrop-filter:blur(18px);
  border-radius:22px;
  padding:24px;
  display:grid;
  grid-template-columns:1fr 260px;
  gap:22px;
  box-shadow:0 0 40px rgba(120,120,255,.18);
}

.terminal{
  background:#05060d;border-radius:16px;padding:18px;
  box-shadow:inset 0 0 20px rgba(0,0,0,.8);
  display:flex;flex-direction:column;
  min-height:520px;
}

.term-header{color:#9aa0ff;font-size:14px;margin-bottom:10px;opacity:.85}
.term-body{flex:1;overflow-y:auto;white-space:pre-wrap;line-height:1.65;font-size:16px}
.input-line{display:flex;align-items:center;gap:8px;margin-top:8px}
.prompt{color:#7CFFB2;font-weight:700}
.cursor{display:inline-block;width:10px;background:#9aa0ff;margin-left:2px;animation:blink 1s steps(2,start) infinite}
@keyframes blink{to{visibility:hidden}}

.side{display:flex;flex-direction:column;gap:14px}
.panel{
  background:rgba(0,0,0,.28);
  border-radius:18px;
  padding:16px;
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 0 18px rgba(0,0,0,.4);
}
.panel h3{margin:0 0 8px 0;font-size:16px}
.stat{margin-top:6px;font-size:15px}
.big{font-size:22px;font-weight:bold;margin-top:4px}

.btn{
  background:linear-gradient(135deg,#6a6dff,#a78bfa);
  border:none;border-radius:999px;padding:14px 22px;color:white;
  cursor:pointer;font-size:15px;
  box-shadow:0 8px 22px rgba(120,120,255,.4);
}
.btn.alt{background:linear-gradient(135deg,#ff5ea8,#ff87c5)}
.hint{font-size:12px;opacity:.65;text-align:center;line-height:1.5}

/* ================= Modal ================= */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.65);display:none;align-items:center;justify-content:center;z-index:50}
.modal{
  background:#0b0f1a;border-radius:18px;max-width:760px;width:92%;
  padding:18px;box-shadow:0 0 40px rgba(0,0,0,.6);
  border:1px solid rgba(255,255,255,.10);
}
.modal h2{margin:0 0 10px 0}
.modal img{max-width:100%;border-radius:14px;margin-top:10px}
.modal p{line-height:1.85;margin:0 0 10px 0;color:#d7d7ee}

/* ================= ä¿¡å° ================= */
#envelopeScreen{
  position:fixed;inset:0;z-index:999;
  display:flex;align-items:center;justify-content:center;
  background:radial-gradient(circle at top,#2a1b3d,#05050a 70%);
}
#envelope{
  width:280px;height:200px;cursor:pointer;
  background:linear-gradient(135deg,#ff6aa2,#ff9acb);
  border-radius:16px;
  box-shadow:0 20px 60px rgba(255,105,180,.45);
  display:flex;align-items:center;justify-content:center;
  font-size:22px;font-weight:bold;color:white;
  transition:.8s;
}

/* ================= æ„›å¿ƒ ================= */
.heart{position:fixed;font-size:18px;pointer-events:none;animation:floatUp 1.8s ease forwards;z-index:5}
@keyframes floatUp{
  from{transform:translateY(0) scale(1);opacity:1}
  to{transform:translateY(-120px) scale(1.4);opacity:0}
}

/* ================= ğŸ“± æ‰‹æ©Ÿç‰ˆ ================= */
@media (max-width:900px){
  body{align-items:flex-start;padding:12px 0}
  .wrap{grid-template-columns:1fr;padding:14px}
  .terminal{min-height:420px}
  .btn{width:100%;padding:16px;font-size:16px}
  .modal img{max-height:65vh;object-fit:contain}
  #envelope{width:240px;height:170px;font-size:20px}
}
@media (max-width:480px){
  .term-body{font-size:14px}
  .terminal{min-height:380px}
  .big{font-size:18px}
}
</style>
</head>

<body>

<div id="envelopeScreen">
  <div id="envelope">ğŸ’Œ é»ä¸€ä¸‹é–‹ä¿¡å°</div>
</div>

<div class="wrap" id="mainApp" style="display:none;">
  <div class="terminal">
    <div class="term-header">ğŸ’» ğŸ’Love you â€” foreverğŸ’</div>
    <div class="term-body" id="terminal"></div>
    <div class="input-line" onclick="focusInput()">
      <span class="prompt">âœ</span>
      <span id="input"></span><span class="cursor"></span>
    </div>
  </div>

  <div class="side">
    <div class="panel">
      <h3>ğŸ’ åœ¨ä¸€èµ·çš„æ—¥å­</h3>
      <div class="big" id="daysBox">0 å¤©</div>
      <div class="stat" id="detailTime"></div>
    </div>

    <div class="panel">
      <button class="btn" id="resetBtn">â™» Reset å‘Šç™½</button>
      <div class="hint">çµ‚ç«¯æ©Ÿä»å¯è¼¸å…¥ï¼šhelp / love / kiss / memory / photo / letter / forever</div>
    </div>
  </div>
</div>

<div class="overlay" id="overlay">
  <div class="modal">
    <h2 id="modalTitle"></h2>
    <div id="modalContent"></div>
    <button class="btn" onclick="closeModal()">é—œé–‰</button>
  </div>
</div>

<script>
const CONFIG = {
  name: "åŒ—é¼»",
  togetherSince: "2024-09-20",
  bootText: `åŒ—é¼»ç”Ÿæ—¥å¿«æ¨‚ ğŸ‚

æœ€è¿‘å¤ªå¿™äº†ï¼Œä¸€ç›´æ²’æœ‰æ™‚é–“å¥½å¥½åœ°é™ªä½ ï¼Œ
é€£ç”Ÿæ—¥å¡ç‰‡éƒ½è®“ä½ ç­‰åˆ°äº†ç¾åœ¨ ğŸ˜¢

ä½†é€™å€‹å¡ç‰‡å¯æ˜¯æˆ‘å·å·ç”¨å¿ƒæº–å‚™çš„ï¼Œ
å¸Œæœ›ä½ æœƒå–œæ­¡ã€‚

> initializing love...
> compiling memories...
> loading hugs...
> system status: deeply in love.

è¼¸å…¥ help çœ‹çœ‹å¯ä»¥åšä»€éº¼ ğŸ’—
`,
  memories: [
    "ç¬¬ä¸€æ¬¡è¦‹é¢çš„é‚£å¤©ï¼Œä¸€è¦‹åˆ°å¦³æˆ‘å°±æƒ³èªªæ€éº¼æœ‰é€™éº¼å¯æ„›çš„å¥³ç”Ÿï¼Œç¬¬ä¸€çœ¼å°±å°ä½ ä¸€è¦‹é¾æƒ…äº†ã€‚",
    "è€Œä¸”ä½ é‚„èƒ½é«”è«’æˆ‘å¡è»Šï¼Œç”šè‡³é‚„è²·é£²æ–™çµ¦æˆ‘ï¼Œè®“æˆ‘è¦ºå¾—ä½ æ˜¯å€‹åˆå¯æ„›æ€§æ ¼åˆå¥½çš„å¥³å­©å­ã€‚",
    "ä½ ä¸åªæ˜¯æˆ‘çš„å¦ä¸€åŠï¼Œä½ æ˜¯æˆ‘çš„ the only best choiceã€‚",
    "æˆ‘æœƒæ°¸é æ„›ä½ çš„ï¼Œæˆ‘å€‘è¦æ°¸é é€™éº¼ç”œèœœä¸‹å»å”·â¤ï¸"
  ],
  letter: `Dear è¦ªæ„›çš„æ¥šæ¶µåŒ—é¼»â¤ï¸
é€™æ˜¯æˆ‘å€‘ä¸€èµ·åº¦éçš„ç¬¬äºŒæ¬¡ç”Ÿæ—¥,
é›–ç„¶æˆ‘æ¯æ¬¡éƒ½é›·é›·çš„,ç”šè‡³é‚„éƒ½è¢«ä½ çŒœåˆ°æˆ‘è¦åšä»€éº¼,
ä½†ä½ é‚„æ˜¯éƒ½æœƒè£å‚»ï¼Œç”šè‡³ä¸å«Œæ£„æˆ‘,çµ¦æˆ‘æ»¿æ»¿çš„æƒ…ç·’åƒ¹å€¼ğŸ˜…,
è®“æˆ‘æ„Ÿå—åˆ°æ»¿æ»¿çš„å›é¥‹,ä»Šå¹´æ˜¯æˆ‘å€‘çš„å¤§å¹´,æˆ‘å€‘ä¸€èµ·æ›äº†å·¥ä½œ,
é›–ç„¶å·¥ä½œæ›´è¾›è‹¦,æˆ‘å€‘èƒ½ç›¸è™•çš„æ™‚é–“ä¹Ÿè®Šå°‘äº†,
ä½†æ˜¯é€™ä¹Ÿè®“æˆ‘å€‘æ›´åŠ çæƒœèƒ½å¤ ä¸€èµ·ç›¸è™•çš„æ™‚å…‰,
è·Ÿä½ åœ¨ä¸€èµ·è®“æˆ‘ç¬¬ä¸€æ¬¡æœ‰äº†æƒ³è¦ç‚ºäº†æˆ‘å€‘çš„æœªä¾†,
ä¸€èµ·å»åŠªåŠ›,ä¸€èµ·é€²æ­¥ã€ä¸€èµ·è®Šå¥½çš„æ±ºå¿ƒ,
è¬è¬å¦³å‡ºç¾åœ¨æˆ‘çš„ç”Ÿå‘½è£¡ï¼Œè®“æˆ‘æœ‰å‹•åŠ›è®Šå¾—æ›´å¥½,
æˆ‘æœƒåŠªåŠ›è³ºéŒ¢è®“å¦³éä¸Šå¦³å¿ƒä¸­æƒ³åƒä¸­çš„ç¾å¥½å¿«æ¨‚çš„æ—¥å­!!!,
For æ„›å¦³çš„åŒ—é¼»ã€‚`,
  photos: ["image/001.jpg","image/002.jpg","image/003.jpg","image/004.jpg","image/005.jpg","image/006.jpg","image/007.jpg","image/008.jpg","image/009.jpg"]
};

const terminal=document.getElementById("terminal");
const inputEl=document.getElementById("input");
const resetBtn=document.getElementById("resetBtn");
const daysBox=document.getElementById("daysBox");
const detailTime=document.getElementById("detailTime");

let idx=0, buffer="", timer=null;
let photoIndex=0, photoTimer=null, photoPlaying=false;

function focusInput(){
  const fake=document.createElement("input");
  fake.style.position="fixed";fake.style.opacity=0;
  document.body.appendChild(fake);fake.focus();
  setTimeout(()=>fake.remove(),200);
}

function daysTogether(){
  const start=new Date(CONFIG.togetherSince+"T00:00:00");
  const now=new Date();
  const diff=now-start;
  const days=Math.floor(diff/86400000);
  const h=Math.floor(diff/3600000)%24;
  const m=Math.floor(diff/60000)%60;
  const s=Math.floor(diff/1000)%60;
  daysBox.textContent=days+" å¤©";
  detailTime.textContent=`${h} å°æ™‚ ${m} åˆ† ${s} ç§’`;
}
setInterval(daysTogether,1000);daysTogether();

function typeBoot(){
  if(idx<CONFIG.bootText.length){
    terminal.textContent+=CONFIG.bootText[idx++];
    terminal.scrollTop=terminal.scrollHeight;
    timer=setTimeout(typeBoot,28);
  }
}
function resetAll(){
  clearTimeout(timer);
  terminal.textContent="";
  inputEl.textContent="";
  buffer="";idx=0;
  typeBoot();
}
resetBtn.onclick=resetAll;

function append(t){terminal.textContent+=t+"\n";terminal.scrollTop=terminal.scrollHeight;}

function openModal(title,html){
  modalTitle.textContent=title;
  modalContent.innerHTML=html;
  overlay.style.display="flex";
}
function closeModal(){
  overlay.style.display="none";
  if(photoTimer){clearInterval(photoTimer);photoTimer=null;photoPlaying=false;photoIndex=0;}
}
overlay.onclick=(e)=>{if(e.target===overlay)closeModal();}

function spawnHeart(x,y){
  const el=document.createElement("div");
  el.className="heart";
  el.textContent=["ğŸ’—","ğŸ’–","ğŸ’˜","ğŸ’","ğŸ’","â¤ï¸"][Math.floor(Math.random()*6)];
  el.style.left=x+"px";el.style.top=y+"px";
  el.style.fontSize=(14+Math.random()*16)+"px";
  document.body.appendChild(el);
  setTimeout(()=>el.remove(),1800);
}

function runCommand(cmd){
  const c=cmd.toLowerCase();
  append("âœ "+cmd);

  if(c==="help"){append("love / kiss / memory / photo / letter / forever / clear");return;}
  if(c==="clear"){terminal.textContent="";return;}
  if(c==="love"){append("I love you, "+CONFIG.name+" â¤ï¸");return;}
  if(c==="kiss"){append("ğŸ’‹ mwah");return;}

  if(c==="memory"){
    let i=0;function next(){if(i<CONFIG.memories.length){append("["+(i+1)+"] "+CONFIG.memories[i++]);setTimeout(next,900);}}
    next();return;
  }

  if(c==="photo"){
    if(photoPlaying){clearInterval(photoTimer);photoIndex=0;}
    photoPlaying=true;
    function show(){
      openModal("ğŸ“· æˆ‘å€‘çš„ç…§ç‰‡","<img src='"+CONFIG.photos[photoIndex]+"'>");
      photoIndex++;
      if(photoIndex>=CONFIG.photos.length){clearInterval(photoTimer);photoPlaying=false;photoIndex=0;}
    }
    show();photoTimer=setInterval(show,1500);return;
  }

  if(c==="letter"){
  openModal("ğŸ’Œ ç”Ÿæ—¥å¡ç‰‡",
    "<div id='letterBox' style='line-height:1.9;font-size:16px;white-space:pre-wrap'></div>"
  );

  const lines = CONFIG.letter
    .split("\n")
    .map(l => l.trim())
    .filter(l => l);

  const box = document.getElementById("letterBox");

  let lineIndex = 0;
  let charIndex = 0;

  function typeNextChar(){

    if(lineIndex >= lines.length){
      const end = document.createElement("p");
      end.innerHTML = "<br>â¤ï¸ æƒ…æ›¸å‚³é€å®Œæˆã€‚";
      box.appendChild(end);
      return;
    }

    if(!box.lastChild || box.lastChild.getAttribute("data-line") !== String(lineIndex)){
      const p = document.createElement("p");
      p.setAttribute("data-line", lineIndex);
      p.textContent = "";
      box.appendChild(p);
    }

    const currentLine = lines[lineIndex];
    const p = box.lastChild;

    if(charIndex < currentLine.length){
      p.textContent += currentLine.charAt(charIndex);
      charIndex++;
      modalContent.scrollTop = modalContent.scrollHeight;
      setTimeout(typeNextChar, 40);   // ğŸ‘ˆ æ¯å€‹å­—çš„é€Ÿåº¦
    }else{
      // ä¸€è¡Œå®Œæˆ â†’ å°åœé “ + æ„›å¿ƒ
      for(let h=0; h<3; h++){
        spawnHeart(
          window.innerWidth*0.3 + Math.random()*window.innerWidth*0.4,
          window.innerHeight*0.3 + Math.random()*window.innerHeight*0.3
        );
      }
      lineIndex++;
      charIndex = 0;
      setTimeout(typeNextChar, 600);  // ğŸ‘ˆ æ¯è¡Œåœé “
    }
  }

  typeNextChar();
  return;
}

  if(c==="forever"){append("æˆ‘ä¸å¤ªæœƒèªªä»€éº¼æƒ…è©±ï¼Œä½†åœ¨æˆ‘å¿ƒä¸­å¦³å·²ç¶“æ˜¯æˆ‘èªå®šæƒ³è¦ä¸€èµ·åº¦éé¤˜ç”Ÿçš„é‚£å€‹å¥³å­©å­äº†ï¼ŒåŒ—é¼»æˆ‘æ„›ä½ ğŸ’[ps.é–‹ä¸€ä¸‹å¦³ç¡è¦ºåœ°æ–¹çš„åºŠé ­æ«ƒ]");return;}
  append("command not found");
}

document.addEventListener("keydown",(e)=>{
  if(e.key==="Backspace"){buffer=buffer.slice(0,-1);inputEl.textContent=buffer;return;}
  if(e.key==="Enter"){runCommand(buffer);buffer="";inputEl.textContent="";return;}
  if(e.key.length===1&&!e.ctrlKey&&!e.metaKey){buffer+=e.key;inputEl.textContent=buffer;}
});

resetAll();

envelope.onclick=()=>{
  envelope.style.transform="scale(1.4)";
  setTimeout(()=>{
    envelopeScreen.style.display="none";
    mainApp.style.display="grid";
    resetAll();
  },600);
}
</script>
</body>
</html>


